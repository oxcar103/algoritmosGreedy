% Generator: GNU source-highlight, by Lorenzo Bettini, http://www.gnu.org/software/src-highlite
\noindent
\mbox{}\textit{\textcolor{Brown}{\#!/usr/bin/env\ ruby}} \\
\mbox{}\textit{\textcolor{Brown}{\#encoding\ utf8}} \\
\mbox{} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Búsqueda\ del\ elemento\ mayoritario.\ Un\ algoritmo:}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Escogemos\ parejas\ de\ elementos\ consecutivos\ repetidos}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ por\ ejemplo:}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ [1,1,2,3,3,3]\ =\textgreater{}\ \{(1,1),(2,3),(3,3)\}\ =\textgreater{}\ [1,3]}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ [3,1,1,2,3,3,3,3]\ =\textgreater{}\ \{(3,1),(1,2),(3,3),(3,3)\}\ =\textgreater{}\ [3,3]}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ No\ necesariamente\ el\ mayoritario\ en\ el\ nuevo\ es\ mayoritario\ en}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ el\ original,\ pero\ si\ existe\ mayoritario\ del\ original\ entonces}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ equivale\ al\ del\ nuevo.}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Caso\ base:\ En\ tamaño\ 2,\ hay\ elemento\ mayoritario\ si}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ ambos\ son\ iguales.}} \\
\mbox{}\textit{\textcolor{Brown}{\#}} \\
\mbox{}\textit{\textcolor{Brown}{\#\ Eficiencia:\ O(n)}} \\
\mbox{} \\
\mbox{}\textbf{\textcolor{Blue}{def}}\ farthest$\_$in$\_$future\textcolor{BrickRed}{(}p\textcolor{BrickRed}{,}\ k\textcolor{BrickRed}{)} \\
\mbox{}\ \ \ \ p$\_$reducido\ \textcolor{BrickRed}{=}\ \textcolor{BrickRed}{[]} \\
\mbox{}\ \ \ \ fallos\ \textcolor{BrickRed}{=}\ \textcolor{Purple}{0} \\
\mbox{} \\
\mbox{}\ \ \ \ p\textcolor{BrickRed}{.}each$\_$with$\_$index\textcolor{Red}{\{}\textcolor{BrickRed}{$|$}element\textcolor{BrickRed}{,}index\textcolor{BrickRed}{$|$}\ p$\_$reducido\ \textcolor{BrickRed}{\textless{}\textless{}}\ element\ \textbf{\textcolor{Blue}{if}}\ element\ \textcolor{BrickRed}{!=}\ p\textcolor{BrickRed}{[}index\textcolor{BrickRed}{+}\textcolor{Purple}{1}\textcolor{BrickRed}{]}\textcolor{Red}{\}} \\
\mbox{} \\
\mbox{}\ \ \ \ \textit{\textcolor{Brown}{\#No\ funciona,\ por\ eso\ lo\ comenté}} \\
\mbox{}\ \ \ \ \textit{\textcolor{Brown}{\#cache\ =\ p.uniq.resize(k)}} \\
\mbox{} \\
\mbox{}\ \ \ \ p\textcolor{BrickRed}{.}each\textcolor{Red}{\{}\textcolor{BrickRed}{$|$}petición\textcolor{BrickRed}{$|$}\  \\
\mbox{}\ \ \ \ \ \ \ \ \textbf{\textcolor{Blue}{if}}\ \textcolor{BrickRed}{!}cache\textcolor{BrickRed}{.}\textbf{\textcolor{Blue}{include}}\textcolor{BrickRed}{?(}petición\textcolor{BrickRed}{)}\textcolor{Red}{\{} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#Falta\ traducir:}} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\textbackslash{}STATE\{Buscamos\ el\ elemento\ que\ está\ en\ caché\ que\ más\ tardará\ en\ volver\ a\ ser\ necesitado\}}} \\
\mbox{}\ \ \ \ \ \ \ \ \textit{\textcolor{Brown}{\#\textbackslash{}STATE\{Sustituimos\ este\ elemento\ por\ el\ que\ necesitamos\ tener\ en\ caché\}}} \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \ \ fallos\textcolor{BrickRed}{+=}\textcolor{Purple}{1} \\
\mbox{}\ \ \ \ \ \ \ \ \textcolor{Red}{\}} \\
\mbox{} \\
\mbox{}\ \ \ \ \textcolor{Red}{\}} \\
\mbox{} \\
\mbox{}\textbf{\textcolor{Blue}{return}}\ fallos \\
\mbox{}\textbf{\textcolor{Blue}{end}} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{\textcolor{Blue}{if}}\ \textbf{\textcolor{Blue}{$\_$$\_$FILE$\_$$\_$}}\ \textcolor{BrickRed}{==}\ \textcolor{ForestGreen}{\$0} \\
\mbox{}puts\ \texttt{\textcolor{Red}{"{}Introduce\ array:\ "{}}} \\
\mbox{}line\ \textcolor{BrickRed}{=}\ gets\textcolor{BrickRed}{.}chomp \\
\mbox{}array\ \textcolor{BrickRed}{=}\ line\textcolor{BrickRed}{.}split\textcolor{BrickRed}{.}map\textcolor{BrickRed}{(\&:}to$\_$i\textcolor{BrickRed}{)} \\
\mbox{} \\
\mbox{}puts\ \texttt{\textcolor{Red}{"{}Elemento\ mayoritario:\ \#\{array.mayoritario\}."{}}} \\
\mbox{}\textbf{\textcolor{Blue}{end}} \\
\mbox{}
